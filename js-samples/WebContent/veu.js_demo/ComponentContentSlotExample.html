<!DOCTYPE html>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">

<style>
    [cloak]{
        display: none;
    }
</style>

<div id="ComponentPropsApp">
    <div class="container">
       <my-apod>
           <h3 slot="title">#1</h3>
           <p slot="caption">Here's today's Astronomy picture</p>
       </my-apod>
       <my-apod date="2019-02-12">
           <h3 slot="title">#2</h3>
           <p slot="caption" slot-scope="pic">Here's the picture from {{pic.date}}</p>
       </my-apod>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

<script>

    Vue.component('my-apod',{
        template:' <div> \
        <slot name="title"> <h3>untitled</h3></slot> \
        <img width="300" height="200" :src="imgSrc" :title="imgTitle"> \
        <slot name="caption" :date="date"><p>unknown date</p></slot> \
        </div> ' ,
        props:['date'],
        data: function(){
            return{
                imgSrc:'',
                imgTitle:''  
            };
        },
        created:function(){
            this.fetchApod();
        },
        methods:{
            fetchApod: function(){
                var apiKey="YslH07vgllZsl3ucnxfuxQOakJRvL9uyLcxzsrdy";
                var url ="https://api.nasa.gov/planetary/apod?api_key=" + apiKey;
                if(this.date){
                    url=url+"&date="+this.date;
                }
                var self=this;    
                axios.get(url)
                .then(function(res){
                    self.imgSrc = res.data.url;
                    self.imgTitle = res.data.title;
                });
            }
        }


    })
  var vm=new Vue({
        el:"#ComponentPropsApp"
    });
</script>